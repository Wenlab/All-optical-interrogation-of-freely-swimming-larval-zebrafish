# Optical-neurophysiology-freely-behaving-zebrafish
Code collection for [All-optical interrogation of brain-wide activity in freely swimming larval zebrafish](https://www.biorxiv.org/content/10.1101/2023.05.24.542114v1).

### Introduction

The code collection here, together with hardware design described in the [paper](https://www.biorxiv.org/content/10.1101/2023.05.24.542114v1), allow us to complete volumetric imaging of brain-wide calcium activity and targeted optogenetic stimulation of specific brain regions in freely swimming larval zebrafish. The three different submodules contain a stable tracking algorithm for zebrafish based on U-Net image processing, a calcium signal extraction and calibration pipeline based on two-color fluorescence imaging, and a real time optogenetic manipulation algorithm based on fast image reconstruction and registration, respectively. 

![fig8](https://github.com/Wenlab/All-optical-interrogation-of-freely-swimming-larval-zebrafish/assets/15085006/f88bcbc4-a4b4-476c-b9a6-a1ccf5f8a3ed)

You can find how to use the code in the README of each submodule.

*__The submodule doesn't update automatically. So you may use the following links to access the latest repositories of the whole project.__*\
[Larval-zebrafish-tracking](https://github.com/Wenlab/Larval-zebrafish-tracking/tree/master)

